import java.util.*;

class Solution {
    public int solution(int[][] board, int[] moves) {
        Stack<Integer> resultStack = new Stack<Integer>();
        int prevItem = 0;
        int answer = 0;
        
        // moves의 Array에 접근하기 위한 변수를 선언하고,
        // moves의 Length만큼 반복한다.
        int movesCount = 0;
        while(movesCount < moves.length) {
            // moves의 n번째 Index의 값을 담는다.
            int movesIndexValue = moves[movesCount] - 1;
            
            // Stack이 비어있지 않으면 최상단의 값을 담는다.
            if(!resultStack.empty()) {
                prevItem = resultStack.peek().intValue();
            }
            
            // board의 Length만큼 반복하여 0이 아니면 인형을 뽑는다.
            // 0이 아니고 prevItem과 값과 같으면 Stack의 최상단 값을 없애고,
            // answer의 없어진 인형의 개수를 더해주며, prevItem을 초기화해준다.
            for(int i = 0; i < board.length; i++) {
                if(board[i][movesIndexValue] != 0) {
                    if(prevItem == board[i][movesIndexValue]) {
                        resultStack.pop();
                        answer += 2;
                        prevItem = 0;
                    } else {
                        resultStack.push(board[i][movesIndexValue]);
                    }
                    
                    board[i][movesIndexValue] = 0;                    
                    break;
                }
            }
            
            movesCount++;
        }
        
        return answer;
    }
}
